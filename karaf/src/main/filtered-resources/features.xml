<features xmlns="http://karaf.apache.org/xmlns/features/v1.0.0" name="newts-${project.version}">

    <feature name="netty" description="Netty IO library" version="${nettyVersion}">
      <bundle dependency="true">mvn:io.netty/netty-handler/${nettyVersion}</bundle>
      <bundle dependency="true">mvn:io.netty/netty-common/${nettyVersion}</bundle>
      <bundle dependency="true">mvn:io.netty/netty-resolver/${nettyVersion}</bundle>
      <bundle dependency="true">mvn:io.netty/netty-buffer/${nettyVersion}</bundle>
      <bundle dependency="true">mvn:io.netty/netty-transport/${nettyVersion}</bundle>
      <bundle dependency="true">mvn:io.netty/netty-transport-native-unix-common/${nettyVersion}</bundle>
      <bundle dependency="true">mvn:io.netty/netty-codec/${nettyVersion}</bundle>
    </feature>

    <feature name="cassandra-driver" description="Datastax Cassandra Driver" version="${cassandraDriverVersion}">
      <feature>netty</feature>
      <bundle dependency="true">mvn:io.dropwizard.metrics/metrics-core/${metricsVersion}</bundle>
      <bundle dependency="true">mvn:com.fasterxml.jackson.core/jackson-core/${jacksonVersion}</bundle>
      <bundle dependency="true">mvn:com.fasterxml.jackson.core/jackson-databind/${jacksonVersion}</bundle>
      <bundle dependency="true">mvn:com.datastax.oss/java-driver-core/${cassandraDriverVersion}</bundle>
      <bundle dependency="true">mvn:com.datastax.oss/native-protocol/1.5.1</bundle>
      <bundle dependency="true">mvn:com.datastax.oss/java-driver-shaded-guava/25.1-jre-graal-sub-1</bundle>
      <bundle dependency="true">mvn:com.datastax.oss/java-driver-query-builder/${cassandraDriverVersion}</bundle>
      <bundle dependency="true">mvn:com.typesafe/config/1.4.1</bundle>
      <bundle dependency="true">mvn:org.hdrhistogram/HdrHistogram/2.1.12</bundle>
    </feature>

    <feature name="fastxml-jackson" description="Jackson JSON library" version="${jacksonVersion}">
      <bundle dependency="true">mvn:com.fasterxml.jackson.core/jackson-core/${jacksonVersion}</bundle>
      <bundle dependency="true">mvn:com.fasterxml.jackson.core/jackson-databind/${jacksonVersion}</bundle>
      <bundle dependency="true">mvn:com.fasterxml.jackson.core/jackson-annotations/${jacksonVersion}</bundle>
    </feature>

    <feature name="newts-api" description="Newts API" version="${osgi.version}">
      <feature version="${jacksonVersion}">fastxml-jackson</feature>
      <bundle dependency="true">mvn:com.google.guava/guava/${guavaVersion}</bundle>
      <bundle dependency="true">mvn:com.google.guava/failureaccess/1.0.1</bundle>
      <bundle dependency="true">mvn:org.apache.commons/commons-jexl3/${jexlVersion}</bundle>
      <bundle>mvn:org.opennms.newts/newts-api/${project.version}</bundle>
      <bundle>mvn:org.opennms.newts/newts-aggregate/${project.version}</bundle>
    </feature>

    <feature name="newts-cassandra-common" description="Newts Cassandra Common" version="${osgi.version}">
      <feature>newts-api</feature>
      <feature>cassandra-driver</feature>
      <bundle>mvn:org.opennms.newts/newts-cassandra-common/${project.version}</bundle>
    </feature>

    <feature name="newts-cassandra" description="Newts Cassandra Repository" version="${osgi.version}">
      <feature>newts-cassandra-common</feature>
      <bundle>mvn:org.opennms.newts/newts-cassandra/${project.version}</bundle>
    </feature>

    <feature name="newts-cassandra-search" description="Newts Cassandra Search" version="${osgi.version}">
      <feature>newts-cassandra-common</feature>
      <bundle>mvn:org.opennms.newts/newts-cassandra-search/${project.version}</bundle>
    </feature>

</features>
